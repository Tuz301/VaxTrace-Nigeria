# ============================================
# VaxTrace Nigeria - Environment Configuration
# ============================================
# This file contains all environment variables needed for the VaxTrace application.
# Copy this file to .env and fill in the actual values.
# NEVER commit .env to version control!

# ============================================
# Application Configuration
# ============================================
NODE_ENV=development
APP_NAME=VaxTrace Nigeria
APP_URL=http://localhost:3000
API_URL=http://localhost:8000
NEXT_PUBLIC_API_URL=http://localhost:8000
PORT=8000

# WebSocket Configuration
NEXT_PUBLIC_WS_URL=http://localhost:3001

# ============================================
# Error Tracking (Sentry)
# ============================================
# Get your DSN from https://sentry.io/settings/projects/
# Leave empty to disable error tracking (recommended for development)

# Backend Sentry
SENTRY_DSN=

# Frontend Sentry (public DSN - starts with https://)
NEXT_PUBLIC_SENTRY_DSN=

# Configuration
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=1.0
SENTRY_PROFILES_SAMPLE_RATE=1.0

# ============================================
# Analytics (PostHog)
# ============================================
# Get your API key from https://app.posthog.com/project/settings
# Leave empty to disable analytics (recommended for development)
NEXT_PUBLIC_POSTHOG_KEY=
NEXT_PUBLIC_POSTHOG_HOST=https://app.posthog.com

# ============================================
# Database Configuration (PostgreSQL + PostGIS)
# ============================================
POSTGRES_USER=vaxtrace_admin
POSTGRES_PASSWORD=your_secure_password_here_change_this
POSTGRES_DB=vaxtrace_nigeria
POSTGRES_PORT=5432
POSTGRES_HOST=postgres
DATABASE_URL=postgresql://vaxtrace_admin:your_secure_password_here_change_this@postgres:5432/vaxtrace_nigeria?schema=public

# ============================================
# Redis Configuration
# ============================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_TLS_PORT=6380
REDIS_PASSWORD=your_redis_password_here_change_this
REDIS_URL=redis://:your_redis_password_here_change_this@redis:6379
REDIS_TLS_URL=rediss://:your_redis_password_here_change_this@redis:6380

# Cache TTL Configuration (in seconds)
CACHE_TTL_STOCK=900        # 15 minutes for stock data
CACHE_TTL_GEO=86400        # 24 hours for geographic data
CACHE_TTL_USER=3600        # 1 hour for user sessions

# ============================================
# OpenLMIS Integration (OAuth2) - Nigeria National Instance
# ============================================
# The URL of the Nigeria National Instance
OPENLMIS_BASE_URL=http://nglmis.nphcda.gov.ng

# Development Mode - Set to 'true' to use mock data without OpenLMIS connection
# This is useful for development when OpenLMIS is not available
# OPENLMIS_DEV_MODE=true

# OAuth2 Configuration (Service Account)
# Use the "Client ID" and "Secret" from your OpenLMIS Service Account
# IMPORTANT: Replace 'changeme' with your actual client secret from OpenLMIS
OPENLMIS_CLIENT_ID=user-client
OPENLMIS_CLIENT_SECRET=changeme

# AUDIT FIX: OAuth2 Grant Type Configuration
# - 'client_credentials': RECOMMENDED for production service accounts (more secure)
# - 'password': Legacy grant type (NOT recommended for production)
# Default: client_credentials
OPENLMIS_GRANT_TYPE=client_credentials

# Service Account Credentials (ONLY required for password grant)
# For production, create a dedicated vaxtrace-service account in OpenLMIS
# NOTE: These are NOT used when OPENLMIS_GRANT_TYPE=client_credentials
OPENLMIS_USERNAME=cheezaram
OPENLMIS_PASSWORD=tkU6wBao8Q

# OAuth2 Token Endpoint (Standard for OpenLMIS v3)
OPENLMIS_TOKEN_ENDPOINT=/api/oauth/token

# Legacy API Configuration (for backward compatibility)
# Generate a UUID for fallback API key
OPENLMIS_API_KEY=73c35fee-60d4-4d4c-976e-a667c7c23196
OPENLMIS_USER_ID=cheezaram
OPENLMIS_REALM=openlmis

# Webhook Configuration (For real-time sync)
# Generate a random long string for webhook signature verification
WEBHOOK_SECRET=generate_a_random_long_string_here
WEBHOOK_ENDPOINT=/api/v1/webhook/sync

# ============================================
# Authentication & Authorization
# ============================================
JWT_SECRET=your_jwt_secret_here_minimum_32_characters
JWT_EXPIRES_IN=1h
JWT_REFRESH_EXPIRES_IN=7d

# Auth0 / Firebase Configuration (for user authentication)
AUTH0_DOMAIN=your-tenant.auth0.com
AUTH0_CLIENT_ID=your_auth0_client_id
AUTH0_CLIENT_SECRET=your_auth0_client_secret
AUTH0_AUDIENCE=https://vaxtrace.ng/api

# Role-Based Access Control
RBAC_ADMIN_ROLE=nphcda_director
RBAC_STATE_ROLE=state_cold_chain_officer
RBAC_LGA_ROLE=lga_logistics_officer

# Mock User Password Hashes (Development Only)
# Generate bcrypt hashes using: htpasswd -bnBC 10 "" "your-password" | tr -d ':\n'
# Default hash below is for "password123" - CHANGE IN PRODUCTION!
MOCK_DEFAULT_PASSWORD_HASH=$2b$10$YourHashedPasswordHere_CHANGE_IN_PRODUCTION
MOCK_ADMIN_PASSWORD_HASH=$2b$10$YourHashedPasswordHere_CHANGE_IN_PRODUCTION
MOCK_MGR_PASSWORD_HASH=$2b$10$YourHashedPasswordHere_CHANGE_IN_PRODUCTION
MOCK_SUP_PASSWORD_HASH=$2b$10$YourHashedPasswordHere_CHANGE_IN_PRODUCTION
MOCK_FAC_PASSWORD_HASH=$2b$10$YourHashedPasswordHere_CHANGE_IN_PRODUCTION

# ============================================
# Encryption & Security (AES-256)
# ============================================
ENCRYPTION_KEY=your_32_byte_hex_encryption_key_here_for_aes256
ENCRYPTION_IV_LENGTH=16

# TLS 1.3 Configuration for Galaxy Backbone
TLS_CERT_PATH=/etc/ssl/certs/vaxtrace.crt
TLS_KEY_PATH=/etc/ssl/private/vaxtrace.key
TLS_CA_PATH=/etc/ssl/certs/gbb-ca.crt

# ============================================
# Protobuf Configuration
# ============================================
PROTOBUF_SCHEMA_PATH=./backend/protos
PROTOBUF_PACKAGE=vaxtrace.stock

# ============================================
# Mapbox Configuration
# ============================================
MAPBOX_ACCESS_TOKEN=your_mapbox_public_access_token_here
MAPBOX_STYLE_URL=mapbox://styles/mapbox/dark-v11

# ============================================
# Notification Services
# ============================================
# SMS Gateway (e.g., Twilio, Termii)
SMS_PROVIDER=twilio
SMS_ACCOUNT_SID=your_twilio_account_sid
SMS_AUTH_TOKEN=your_twilio_auth_token
SMS_FROM_NUMBER=+2348000000000

# WhatsApp Business API
WHATSAPP_API_KEY=your_whatsapp_api_key
WHATSAPP_PHONE_NUMBER_ID=your_whatsapp_phone_number_id

# ============================================
# Development Tools (Optional)
# ============================================
PGADMIN_EMAIL=admin@vaxtrace.ng
PGADMIN_PASSWORD=your_pgadmin_password_here
PGADMIN_PORT=5050

REDIS_COMMANDER_PORT=8081

# ============================================
# Logging & Monitoring
# ============================================
LOG_LEVEL=debug
LOG_FORMAT=json
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# ============================================
# Compliance (NDPR)
# ============================================
DATA_RETENTION_DAYS=2555  # 7 years as per Nigeria health data regulations
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30

# ============================================
# Performance & Scaling
# ============================================
MAX_CONNECTIONS=200
SHARED_BUFFERS=256MB
EFFECTIVE_CACHE_SIZE=1GB
REDIS_MAX_MEMORY=512mb
